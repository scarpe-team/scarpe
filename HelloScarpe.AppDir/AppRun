#!/bin/bash
# AppRun script for HelloScarpe
# Auto-generated by scarpe package

SELF=$(readlink -f "$0")
HERE=${SELF%/*}

# Check for WebKitGTK
if ! pkg-config --exists webkit2gtk-4.1 2>/dev/null && ! pkg-config --exists webkit2gtk-4.0 2>/dev/null; then
  echo "Error: WebKitGTK is required but not installed."
  echo ""
  echo "Install it with:"
  echo "  Ubuntu/Debian: sudo apt install libwebkit2gtk-4.1-0"
  echo "  Fedora:        sudo dnf install webkit2gtk4.1"
  echo "  Arch:          sudo pacman -S webkit2gtk"
  exit 1
fi

# Set up Ruby environment
export PATH="$HERE/usr/bin:$PATH"
export LD_LIBRARY_PATH="$HERE/usr/lib:$LD_LIBRARY_PATH"
export GEM_HOME="$HERE/usr/lib/ruby/gems/3.4.0"
export GEM_PATH="$GEM_HOME"
export RUBYLIB="$HERE/usr/lib/ruby/3.4.0:$HERE/usr/lib/ruby/site_ruby/3.4.0:$HERE/usr/lib/ruby/vendor_ruby/3.4.0"
export RUBYOPT="-r$HERE/usr/lib/ruby/site_ruby/traveling_ruby_restore_environment.rb"

# Run the app
cd "$HERE/usr/share/helloscarpe"
exec "$HERE/usr/bin/ruby" boot.rb "$@"
